# ğŸ¤–âš½ å¼€æ”¾åŸå­ä¸¾åŠ 2025 Â· å…·èº«æ™ºèƒ½ä»¿äººæœºå™¨äººè¶³çƒèµ›

> åŸºäº **Unity ML-Agents** æ ¼ç‰©ä»¿çœŸå¹³å°ä¸ **PPO å¼ºåŒ–å­¦ä¹ ** ç®—æ³•ï¼Œè®­ç»ƒä»¿äººæœºå™¨äººå®ç°è‡ªä¸»è¡Œèµ°ã€å¯»çƒè¸¢çƒã€æ‘”å€’èµ·èº«çš„å…¨æµç¨‹è‡ªä¸»è¶³çƒè¡Œä¸ºã€‚

---

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯å‚åŠ  **2025 ["æ ¼ç‰©"å…·èº«æ™ºèƒ½ä»¿çœŸå¹³å°](https://github.com/loongOpen/Unity-RL-Playground) è¶³çƒæ¯”èµ›** çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚é¡¹ç›®åŸºäº **Unity ç‰©ç†ä»¿çœŸå¼•æ“**ï¼Œç»“åˆ **Unity ML-Agents** å¼ºåŒ–å­¦ä¹ æ¡†æ¶ï¼Œä½¿ç”¨ **PPO (Proximal Policy Optimization)** ç®—æ³•è®­ç»ƒä»¿äººåŒè¶³æœºå™¨äººåœ¨è™šæ‹Ÿè¶³çƒåœºä¸Šå®Œæˆè‡ªä¸»æ¯”èµ›ã€‚

### æ ¸å¿ƒèƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ |
|:---:|------|
| ğŸƒ **è‡ªä¸»è¡Œèµ°** | åŒè¶³æ­¥æ€æ§åˆ¶ï¼ŒåŸºäºå…³èŠ‚åŠ›çŸ©çš„å‘¨æœŸæ€§æ­¥æ€ç”Ÿæˆ |
| âš½ **å¯»çƒè¸¢çƒ** | å®æ—¶æ„ŸçŸ¥çƒçš„ä½ç½®ï¼Œè‡ªä¸»å¯¼èˆªæ¥è¿‘å¹¶å®Œæˆå°„é—¨ |
| ğŸ”„ **å€’åœ°èµ·èº«** | ä»ä»»æ„å€’åœ°å§¿æ€è‡ªä¸»æ¢å¤ç«™ç«‹ï¼Œæ”¯æŒå¹³èººã€è¶´ç€ã€ä¾§èººç­‰ |
| ğŸ§  **åŒæ¨¡å‹åˆ‡æ¢** | è¸¢çƒæ¨¡å‹ä¸èµ·èº«æ¨¡å‹çš„åŠ¨æ€çŠ¶æ€æœºåˆ‡æ¢ï¼Œå®ç°å®Œæ•´æ¯”èµ›æµç¨‹ |

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ä»¿çœŸå¹³å°

- **å¼•æ“**ï¼šUnity 2021.3+
- **RL æ¡†æ¶**ï¼š[Unity ML-Agents](https://github.com/Unity-Technologies/ml-agents) 2.0.0+
- **æ¨ç†å¼•æ“**ï¼šUnity Sentisï¼ˆONNX æ¨¡å‹æ¨ç†ï¼‰
- **ç‰©ç†ä»¿çœŸ**ï¼šUnity å†…ç½® ArticulationBody å…³èŠ‚ç³»ç»Ÿï¼Œä»¿çœŸæ­¥é•¿ 0.01s

### å¼ºåŒ–å­¦ä¹ 

- **ç®—æ³•**ï¼šPPO (Proximal Policy Optimization)
- **è®­ç»ƒæ¡†æ¶**ï¼šPython ç«¯ `mlagents-learn` + PyTorch
- **è¯¾ç¨‹å­¦ä¹  (Curriculum Learning)**ï¼šä»ç®€å•åˆ°å¤æ‚é€æ­¥é€’è¿›çš„è®­ç»ƒç­–ç•¥
- **æ¨¡å‹è¾“å‡º**ï¼šå¯¼å‡ºä¸º `.onnx` æ ¼å¼ï¼Œåœ¨ Unity ä¸­ç›´æ¥æ¨ç†

### æœºå™¨äººæ¨¡å‹

ä»¿äººåŒè¶³æœºå™¨äºº **Tinker**ï¼Œå…·å¤‡ **10â€“12 ä¸ªå¯æ§å…³èŠ‚**ï¼ˆé«‹å…³èŠ‚ã€è†å…³èŠ‚ã€è¸å…³èŠ‚ç­‰ï¼‰ï¼Œæ¯ä¸ªå…³èŠ‚é€šè¿‡ `ArticulationBody` çš„ RevoluteJoint é©±åŠ¨ã€‚

---

## âš½ æ ¸å¿ƒé€»è¾‘

### 1. è¡Œèµ°ä¸è¸¢çƒï¼ˆTinker1Agentï¼‰

**è§‚æµ‹ç©ºé—´**ï¼šæœºå™¨äººæ„ŸçŸ¥ä»¥ä¸‹çŠ¶æ€ä¿¡æ¯ä½œä¸ºç¥ç»ç½‘ç»œè¾“å…¥ï¼š
- çƒçš„ç›¸å¯¹ä½ç½®ã€é€Ÿåº¦å’Œè·ç¦»
- å·¦å³è„šä¸çƒçš„ç›¸å¯¹è·ç¦»ã€æ–¹å‘
- æœºå™¨äººèº¯å¹²å§¿æ€ï¼ˆé‡åŠ›æ–¹å‘ã€è§’é€Ÿåº¦ã€çº¿é€Ÿåº¦ï¼‰
- æ‰€æœ‰å¯æ§å…³èŠ‚çš„è§’åº¦ä¸è§’é€Ÿåº¦
- çƒé—¨çš„ç›¸å¯¹ä½ç½®ä¸è·ç¦»

**åŠ¨ä½œç©ºé—´**ï¼šè¿ç»­åŠ¨ä½œç©ºé—´ï¼Œè¾“å‡ºå„å…³èŠ‚çš„ç›®æ ‡è§’åº¦ã€‚é€šè¿‡ PD æ§åˆ¶å™¨ï¼ˆåˆšåº¦ 2000ï¼Œé˜»å°¼ 100ï¼‰é©±åŠ¨å…³èŠ‚è¿åŠ¨ã€‚

**æ­¥æ€ç”Ÿæˆ**ï¼šåŸºäºä½™å¼¦å‡½æ•°çš„å‘¨æœŸæ€§æ­¥æ€ä¿¡å·ï¼Œå·¦å³è…¿äº¤æ›¿æ‘†åŠ¨ï¼š
```
uf = (-cos(2Ï€Â·t/T) + 1) / 2
```
æ­¥æ€å‘¨æœŸ T=25 å¸§ï¼Œå·¦å³è…¿ç›¸ä½äº¤æ›¿ï¼Œå®ç°ç¨³å®šçš„åŒè¶³è¡Œèµ°ã€‚

**å¥–åŠ±å‡½æ•°è®¾è®¡**ï¼š
- âœ… å‰è¿›å¥–åŠ± â€” é¼“åŠ±æœºå™¨äººå‘å‰è¿åŠ¨
- âœ… æ¥è¿‘çƒå¥–åŠ± â€” è·ç¦»è¶Šè¿‘å¥–åŠ±è¶Šå¤§
- âœ… æœå‘çƒ/çƒé—¨å¥–åŠ± â€” å¼•å¯¼æœºå™¨äººé¢å‘ç›®æ ‡
- âœ… è¸¢çƒå¥–åŠ± â€” ç¢°æ’æ£€æµ‹è§¦å‘ï¼Œä¾æ®è¸¢çƒæ–¹å‘å’Œé€Ÿåº¦ç»™äºˆé¢å¤–å¥–åŠ±
- âœ… è¿›çƒå¥–åŠ± â€” çƒè¿›å…¥çƒé—¨åŒºåŸŸæ—¶è·å¾—é«˜é¢å¥–åŠ±
- âœ… ç¨³å®šæ€§æƒ©ç½š â€” è¿‡å¤§çš„ä¿¯ä»°/æ¨ªæ»šè§’åº¦å—åˆ°æƒ©ç½š
- âœ… èƒ½é‡æƒ©ç½š â€” å‡å°‘ä¸å¿…è¦çš„å…³èŠ‚åŠ›çŸ©æ¶ˆè€—

### 2. å€’åœ°èµ·èº«ï¼ˆTinker3Agentï¼‰

è®­ç»ƒæœºå™¨äººä» **ä»»æ„å€’åœ°å§¿æ€** æ¢å¤åˆ°ç«™ç«‹çŠ¶æ€ã€‚

**å¤šå§¿æ€åˆå§‹åŒ–**ï¼šè®­ç»ƒæ—¶éšæœºåˆå§‹åŒ–ä¸ºå¹³èººã€è¶´ç€ã€ä¾§èººæˆ–å®Œå…¨éšæœºè§’åº¦ï¼Œé˜²æ­¢å¯¹å•ä¸€å§¿æ€è¿‡æ‹Ÿåˆã€‚

**è¾…åŠ©ææ‹‰åŠ›è¯¾ç¨‹**ï¼šé€šè¿‡è¯¾ç¨‹å­¦ä¹ é€æ­¥é™ä½è¾…åŠ©ææ‹‰åŠ› `fy`ï¼ˆ70 â†’ 0ï¼‰ï¼Œè¿«ä½¿æœºå™¨äººä»ä¾èµ–è¾…åŠ©åŠ›åˆ°å®Œå…¨è‡ªä¸»èµ·èº«ã€‚

**èµ·èº«å¥–åŠ±**ï¼šæ ¸å¿ƒå¥–åŠ±ä¸ºæœºå™¨äººèº¯å¹²å‘ä¸Šæ–¹å‘ä¸ä¸–ç•Œå‚ç›´è½´çš„ç‚¹ç§¯ `UpDotVertical`ï¼Œå®Œå…¨ç›´ç«‹æ—¶ç‚¹ç§¯ä¸º 1ï¼Œè·å¾—æœ€å¤§å¥–åŠ±ã€‚

### 3. åŒæ¨¡å‹çŠ¶æ€æœºåˆ‡æ¢

åœ¨æ¨ç†é˜¶æ®µï¼Œé€šè¿‡çŠ¶æ€æœºåŠ¨æ€åˆ‡æ¢ä¸¤ä¸ªç‹¬ç«‹è®­ç»ƒçš„ ONNX æ¨¡å‹ï¼š

```
æ­£å¸¸è¡Œèµ°è¸¢çƒ â”€â”€[æ£€æµ‹åˆ°æ‘”å€’ï¼šå§¿æ€è§’ > 25Â° æˆ–é«˜åº¦è¿‡ä½]â”€â”€â–¶ åˆ‡æ¢åˆ°èµ·èº«æ¨¡å‹
     â–²                                                        â”‚
     â”‚                                              èµ·èº«æ¨¡å‹æ§åˆ¶å…³èŠ‚
     â”‚                                                        â”‚
     â””â”€â”€â”€â”€â”€â”€[ç«™ç¨³åå†·å´ä¸€æ®µæ—¶é—´]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ‡æ¢å›è¸¢çƒæ¨¡å‹
```

å…³é”®æœºåˆ¶ï¼š
- è¿ç»­å¤šå¸§æ£€æµ‹åˆ°å¼‚å¸¸å§¿æ€æ‰åˆ¤å®šä¸ºæ‘”å€’ï¼ˆé˜²æ­¢è¯¯è§¦å‘ï¼‰
- èµ·èº«æˆåŠŸåéœ€ä¿æŒç¨³å®šä¸€å®šå¸§æ•°æ‰åˆ‡æ¢å›è¸¢çƒæ¨¡å‹
- åˆ‡æ¢æ—¶æ¸…é›¶æ‰€æœ‰å…³èŠ‚æŒ‡ä»¤ï¼Œé¿å…æ®‹ç•™åŠ¨ä½œå¹²æ‰°

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
football-match-gewu-2025/
â”œâ”€â”€ å¶è€å¸ˆç»„æ–¹æ³•/                        # å®Œæ•´æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ æŠ€æœ¯æŠ¥å‘Š.pdf                    #   æŠ€æœ¯æŠ¥å‘Šæ–‡æ¡£
â”‚   â”œâ”€â”€ æˆå‘˜åå•.pdf                    #   å›¢é˜Ÿæˆå‘˜ä¿¡æ¯
â”‚   â””â”€â”€ æºä»£ç &æ¨¡å‹/                    #   æºä»£ç ä¸è®­ç»ƒå¥½çš„æ¨¡å‹
â”‚       â”œâ”€â”€ Tinker1Agent.cs             #     å¯»çƒè¸¢çƒæ™ºèƒ½ä½“ï¼ˆå«èµ·èº«åˆ‡æ¢é€»è¾‘ï¼‰
â”‚       â”œâ”€â”€ Tinker3Agent.cs             #     å€’åœ°èµ·èº«æ™ºèƒ½ä½“
â”‚       â”œâ”€â”€ tiqiu.onnx                  #     è¸¢çƒæ¨¡å‹ï¼ˆONNXï¼‰
â”‚       â”œâ”€â”€ StandUp.onnx                #     èµ·èº«æ¨¡å‹ï¼ˆONNXï¼‰
â”‚       â””â”€â”€ README.md                   #     è¯¦ç»†è¯´æ˜æ–‡æ¡£
â””â”€â”€ README.md                           # æœ¬æ–‡æ¡£
```

---

## ğŸ”§ ç¯å¢ƒä¾èµ–

| ä¾èµ– | ç‰ˆæœ¬è¦æ±‚ |
|------|---------|
| Unity | 2021.3+ |
| ML-Agents | 2.0.0+ |
| Python | 3.8+ |
| PyTorch | 1.8.0+ |

> ğŸ“– è¯¦ç»†ç¯å¢ƒæ­å»ºè¯·å‚è€ƒï¼š[**"æ ¼ç‰©"å…·èº«æ™ºèƒ½ä»¿çœŸå¹³å°**](https://github.com/loongOpen/Unity-RL-Playground)

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### è®­ç»ƒ

```bash
# è®­ç»ƒèµ·èº«æ¨¡å‹
mlagents-learn config.yaml --run-id=standUp --force

# è®­ç»ƒè¸¢çƒæ¨¡å‹
mlagents-learn config.yaml --run-id=tiqiu --force
```

### æµ‹è¯•

1. åœ¨ Unity Inspector ä¸­å°† `train` è®¾ä¸º `false`
2. å°†è®­ç»ƒå¥½çš„ `.onnx` æ¨¡å‹æ‹–å…¥å¯¹åº”çš„ Model æ§½ä½
3. ç‚¹å‡»è¿è¡Œï¼Œæœºå™¨äººå°†è‡ªåŠ¨æ‰§è¡Œè¿½è¸ªè¸¢çƒ + æ‘”å€’èµ·èº«çš„å®Œæ•´æµç¨‹
